---
import { siteConfig } from '../config.ts';
import { Icon } from 'astro-icon/components';
import { howItWorksSteps } from '../content/how-it-works';

// Soft Pastel Palette that works with Mint & Lavender
const stepColours = [
  'bg-brand-lavender', // Step 1: Your brand lavender (already pastel)
  'bg-[#fef9c3]',      // Step 2: Pastel Lemon
  'bg-[#dcfce7]',      // Step 3: Pastel Mint-Green
  'bg-[#e0f2fe]'       // Step 4: Pastel Sky Blue
];
---

<section
  id="how-it-works"
  class="relative border-t-2 border-brand-charcoal px-4 py-24 sm:px-6 lg:px-8 bg-brand-mint overflow-hidden"
>
  <div class="absolute inset-0 opacity-[0.15]" style="background-image: radial-gradient(#2d3446 1px, transparent 1px); background-size: 30px 30px;"></div>

  <div class="absolute bottom-0 left-0 h-16 w-16 border-b-[6px] border-l-[6px] border-brand-charcoal opacity-30"></div>
  <div class="absolute bottom-0 right-0 h-16 w-16 border-b-[6px] border-r-[6px] border-brand-charcoal opacity-30"></div>

  <div class="mx-auto max-w-7xl relative z-10">
    <div class="scroll-fade-down mx-auto mb-20 max-w-3xl text-center">
      <h2 class="text-brand-charcoal mb-6 text-4xl font-extrabold sm:text-5xl tracking-tight uppercase italic">
        <span class="relative inline-block px-4 py-1 bg-white border-2 border-brand-charcoal shadow-[6px_6px_0px_0px_rgba(45,52,70,1)] -rotate-1">
          {siteConfig.howItWorks.title}
        </span>
      </h2>
      <p class="text-brand-charcoal text-xl font-bold mt-4">
        Four simple steps to your professional platform.
      </p>
    </div>

    <div class="grid grid-cols-1 gap-10 md:grid-cols-2 lg:grid-cols-4">
      {
        howItWorksSteps.map((step, index) => (
          <div class="relative group">
            <div
              class={`scroll-fade-${index % 2 === 0 ? 'left' : 'right'} bg-white border-2 border-brand-charcoal rounded-2xl p-8 shadow-[8px_8px_0px_0px_rgba(45,52,70,1)] hover:translate-x-[4px] hover:translate-y-[4px] hover:shadow-none transition-all stagger-${index + 1}`}
            >
              <div class={`mb-6 flex h-14 w-14 items-center justify-center rounded-xl border-2 border-brand-charcoal text-2xl font-black text-brand-charcoal shadow-[3px_3px_0px_0px_rgba(45,52,70,1)] ${stepColours[index]}`}>
                {step.number}
              </div>
              
              <h3 class="text-brand-charcoal mb-3 text-xl font-black uppercase italic tracking-tight">
                {step.title}
              </h3>
              <p class="text-brand-charcoal/80 font-medium leading-relaxed">
                {step.description}
              </p>
            </div>
            
            {index < howItWorksSteps.length - 1 && (
              <div class="absolute top-1/2 -right-8 hidden -translate-y-1/2 transform lg:block z-20">
                <Icon
                  name="heroicons:arrow-long-right"
                  class="text-brand-charcoal h-10 w-10 opacity-20 group-hover:opacity-100 group-hover:translate-x-2 transition-all"
                />
              </div>
            )}
          </div>
        ))
      }
    </div>
  </div>
</section>